{% extends 'layouts/question.html' %}

{% block content_primary %}

  <!-- remove once form is working -->
  <div class="govuk-warning-text">
    <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
    <strong class="govuk-warning-text__text">
      <span class="govuk-visually-hidden">Warning</span>
      This form is not yet working
    </strong>
  </div>

    {% for item in list_items %}
      <li>{{ item }}</li>
    {% endfor %}
    </ul>

  <form class="govuk-form" method="POST" action="{{ url_for('questions.save_answer', consideration_slug=consideration.slug, question_slug=question.slug, stage=stage, next=next) }}">
    {{ form.hidden_tag() }}

    {% if request.args.get('next') %}
      <input type="hidden" name="next" value="{{ request.args.get('next') }}"/>
    {% endif %}
    <span class="govuk-caption-xl">{{ consideration.name }}</span>
    <h1 class="govuk-heading-xl">{{ form.form_title }}</h1>

    {% for field in form if field.name not in ['csrf_token', 'position']  %}
    <div class="govuk-form-group">
      {{ field.label(class='govuk-label') }}

      {%- if field.description %}
      <div id="" class="govuk-hint">
        {{ field.description }}
      </div>
      {% endif -%}

      {% if field.type == "TextAreaField" %}
        {% set fieldClass = 'govuk-textarea' %}
      {% else %}
        {% set fieldClass = 'govuk-input' %}
      {% endif %}
      {{ field(class=fieldClass) }}

      {%- if field.errors %}
      <ul>
      {% for error in field.errors %}
        <li>{{ error }}</li>
      {% endfor %}
      </ul>
      {% endif -%}
    </div>
    {% endfor %}

    <p class="govuk-body">
      <a href="{{ url_for('questions.add_to_list', consideration_slug=consideration.slug, question_slug=question.slug, stage=stage, next=next)}}" class="govuk-link">Add another</a>
    </p>

    <div class="govuk-button-group">
      {% if next %}
        <button class="govuk-button" type="submit">Save and continue</button>
      {% else %}
        <button class="govuk-button" type="submit">Save</button>
      {% endif %}
      <a class="govuk-link" href="{{ url_for('questions.index', consideration_slug=consideration.slug, stage=stage )}}">Cancel</a>
    </div>

  </form>

{% endblock content_primary %}
