
<form class="govuk-form">

<!-- filter by stage -->
<div class="govuk-form-group">
  {% set checkboxesHTML %}
    {% set pa_checked = request.args.getlist("stage") %}
    {% for stage in stages %}
    <div class="govuk-checkboxes__item">
      <input class="govuk-checkboxes__input" id="stage-{{ stage.value }}" name="stage" type="checkbox" value="{{ stage.value }}" {% if stage.value in pa_checked %}checked=checked{% endif %}>
      <label class="govuk-label govuk-checkboxes__label" for="stage-{{ stage.value }}">
        {{ stage.value }}
      </label>
    </div>
    {% endfor %}
  {% endset %}

  {% call dlFilterGroup({
    "title": "Stage",
    "is_open": True,
    "selected": 0
  }) %}

  {{ dlFilterCheckboxes({
    "uniqueID": "167824",
    "checkboxesHTML": checkboxesHTML
  }) }}
  {% endcall %}
</div>

  <div class="govuk-form-group">
    <fieldset class="govuk-fieldset">
      <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
        <h3 class="govuk-fieldset__heading">Show archived</h3>
      </legend>
      <div class="govuk-checkboxes" data-module="govuk-checkboxes">
        <div class="govuk-checkboxes__item">
          <input class="govuk-checkboxes__input" id="include_archived" name="include_archived" type="checkbox" value="true" {% if include_archived %} checked{% endif %}>
          <label class="govuk-label govuk-checkboxes__label" for="include_archived">
            Show
          </label>
        </div>
      </div>
    </fieldset>
  </div>
  <div class="govuk-form-group">
    <fieldset class="govuk-fieldset">
      <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
        <h3 class="govuk-fieldset__heading">Legislation</h3>
      </legend>
      <div class="govuk-radios govuk-radios--small" data-module="govuk-radios">
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="legislation-filter" name="legislation" type="radio" value="recorded" {% if legislation_filter == "recorded" %} checked{% endif %}>
          <label class="govuk-label govuk-radios__label" for="legislation-filter">
            Recorded
          </label>
        </div>
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="legislation-filter-2" name="legislation" type="radio" value="missing" {% if legislation_filter == "missing" %} checked{% endif %}>
          <label class="govuk-label govuk-radios__label" for="legislation-filter-2">
            Missing
          </label>
        </div>
      </div>
    </fieldset>
  </div>

  <div class="govuk-form-group">
    <fieldset class="govuk-fieldset">
      <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
        <h3 class="govuk-fieldset__heading">Is a LLC?</h3>
      </legend>
      <div class="govuk-radios govuk-radios--small" data-module="govuk-radios">
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="is-llc-filter" name="is-llc" type="radio" value="true" {% if llc_filter == "true" %} checked{% endif %}>
          <label class="govuk-label govuk-radios__label" for="is-llc-filter">
            Yes
          </label>
        </div>
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="is-llc-filter-2" name="is-llc" type="radio" value="false" {% if llc_filter == "false" %} checked{% endif %}>
          <label class="govuk-label govuk-radios__label" for="is-llc-filter-2">
            No
          </label>
        </div>
      </div>
    </fieldset>
  </div>

  <div class="govuk-button-group">
    <button class="govuk-button" type="submit">Filter</button>
    <a class="govuk-link" href="{{ url_for('planning_consideration.considerations') }}">Clear</a>
  </div>
  {% if stage_filter %}
    <input type="hidden" name="stage" value="{{ stage_filter }}">
  {% endif %}
</form>
